[build]
  base = "frontend"
  publish = "frontend/build"
  command = "npm run build"

[build.environment]
  REACT_APP_BACKEND_URL = "https://buzzaraunt.onrender.com"
  VITE_API_URL = "https://buzzaraunt.onrender.com"
  NODE_ENV = "production"
  NODE_OPTIONS = "--max_old_space_size=4096"

[[plugins]]
  package = "@netlify/plugin-lighthouse"
  [plugins.inputs]
    # Valid inputs for this plugin
    thresholds = { performance = 80, accessibility = 90, "best-practices" = 85, seo = 85 }
    fail_deploy_on_score_thresholds = false
    output_path = "lighthouse-report.html"

[[redirects]]
  from = "/api/*"
  to = "https://buzzaraunt.onrender.com/api/:splat"
  status = 200
  force = true
